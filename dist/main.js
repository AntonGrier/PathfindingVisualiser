!function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=3)}([function(t,e){t.exports=React},function(t,e,s){"use strict";var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(a,r){function o(t){try{h(i.next(t))}catch(t){r(t)}}function n(t){try{h(i.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,n)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=s(0),r=s(0),o=s(6),n=s(7);e.GRID_W=50,e.GRID_H=27;const h={x:Math.floor(e.GRID_W/4),y:Math.floor(e.GRID_H/2)},l={x:e.GRID_W-h.x,y:h.y};var u,c;!function(t){t[t.PlacingWall=0]="PlacingWall",t[t.RemovingWall=1]="RemovingWall",t[t.MovingStart=2]="MovingStart",t[t.MovingFinish=3]="MovingFinish",t[t.Disabled=4]="Disabled"}(u=e.MouseState||(e.MouseState={})),function(t){t[t.Unvisited=0]="Unvisited",t[t.Visited=1]="Visited",t[t.Wall=2]="Wall",t[t.ShortestPath=3]="ShortestPath"}(c=e.NodeType||(e.NodeType={}));class d extends r.Component{constructor(t){super(t),this.state={grid:[],startPos:null,finishPos:null,mouseState:null,isMouseDown:!1,updateLock:!1,prevAlgorithm:null}}componentDidMount(){let t=[];for(let s=0;s<e.GRID_H;s++){let i=[];for(let t=0;t<e.GRID_W;t++){let e={position:{x:t,y:s},nodeType:c.Unvisited};i.push(e)}t.push(i)}this.setState({grid:t,startPos:h,finishPos:l,mouseState:u.PlacingWall,isMouseDown:!1}),this.references=Array(e.GRID_H).fill([]).map(()=>Array(e.GRID_W).fill(0).map(()=>r.createRef()))}shouldComponentUpdate(t,e,s){return!e.updateLock}clearPath(){let t=this.state.grid;t=t.map(t=>t.map(t=>Object.assign(Object.assign({},t),{nodeType:t.nodeType===c.Wall?c.Wall:c.Unvisited}))),this.setState({grid:t})}updateMouseState(t,e){if(this.state.mouseState!==u.Disabled)switch(e){case"mousedown":this.onMouseDown(t);break;case"mouseup":this.onMouseUp();break;case"mouseenter":this.onMouseEnter(t)}}onMouseDown(t){let{grid:e,mouseState:s,isMouseDown:i,prevAlgorithm:a}=this.state,r=e[t.y][t.x].nodeType;s===u.MovingStart&&this.isFinish(t)||s===u.MovingFinish&&this.isStart(t)||(s=this.isStart(t)?u.MovingStart:this.isFinish(t)?u.MovingFinish:r===c.Unvisited?u.PlacingWall:u.RemovingWall,this.isStart(t)||this.isFinish(t)||(null!==a&&(this.clearPath(),a=null),r===c.Wall?e[t.y][t.x].nodeType=c.Unvisited:e[t.y][t.x].nodeType=c.Wall),i=!0,this.setState({grid:e,mouseState:s,isMouseDown:i,prevAlgorithm:a}))}onMouseUp(){let t=u.PlacingWall;this.setState({mouseState:t,isMouseDown:!1})}onMouseEnter(t){let{grid:e,startPos:s,finishPos:i,mouseState:a,isMouseDown:r,prevAlgorithm:o}=this.state;if(r&&!this.isStart(t)&&!this.isFinish(t))switch(a){case u.MovingStart:s=t,null!==o?this.recalculatePath(s,i,o):this.setState({startPos:s});break;case u.MovingFinish:i=t,null!==o?this.recalculatePath(s,i,o):this.setState({finishPos:i});break;case u.PlacingWall:e[t.y][t.x].nodeType=c.Wall,this.setState({grid:e});break;case u.RemovingWall:e[t.y][t.x].nodeType=c.Unvisited,this.setState({grid:e})}}recalculatePath(t,e,s){this.clearPath();let i=this.state.grid;s.calculatePath(i,t,e);let a=s.produceVisitedInOrder(),r=s.produceFinalPath();a.forEach(t=>{i[t.y][t.x].nodeType=c.Visited}),r.forEach(t=>{i[t.y][t.x].nodeType=c.ShortestPath}),this.setState({grid:i,startPos:t,finishPos:e,prevAlgorithm:s})}isStart(t){return t.x===this.state.startPos.x&&t.y===this.state.startPos.y}isFinish(t){return t.x===this.state.finishPos.x&&t.y===this.state.finishPos.y}performAlgorithm(t){this.setState({prevAlgorithm:t,mouseState:u.Disabled}),t.calculatePath(this.state.grid,this.state.startPos,this.state.finishPos);let e=t.produceVisitedInOrder(),s=t.produceFinalPath();this.visualiseAlgorithm(e,s)}visualiseAlgorithm(t,e){(()=>{i(this,void 0,void 0,(function*(){this.lockRender(),yield this.visualiseVisited(t),yield this.visualisePath(e),this.unlockRender(),this.setState({mouseState:u.PlacingWall})}))})()}visualiseVisited(t){return new Promise(e=>{for(let s=0;s<=t.length;s++)setTimeout(()=>{if(s===t.length)e();else{let e=t[s],i=this.references[e.y][e.x],a=i.current.className;if(!a.includes("cell-start")&&!a.includes("cell-finish")){i.current.className="cell cell-visited";let t=this.state.grid;t[e.y][e.x].nodeType=c.Visited,this.setState({grid:t})}}},5*s)})}visualisePath(t){return new Promise(e=>{for(let s=0;s<=t.length;s++)setTimeout(()=>{if(s===t.length)e();else{let e=t[s],i=this.references[e.y][e.x],a=i.current.className;if(!a.includes("cell-start")&&!a.includes("cell-finish")){i.current.className="cell cell-shortestPath";let t=this.state.grid;t[e.y][e.x].nodeType=c.ShortestPath,this.setState({grid:t})}}},5*s)})}lockRender(){this.setState({updateLock:!0})}unlockRender(){this.setState({updateLock:!1})}render(){let t=this.state.grid;return a.createElement("div",null,a.createElement(n.default,{performAlgorithm:t=>this.performAlgorithm(t),clearPath:()=>this.clearPath()}),a.createElement("div",{className:"grid"},t.map((t,e)=>a.createElement("div",{className:"grid-row",key:e},t.map((t,s)=>a.createElement(o.default,{position:{x:s,y:e},isStart:this.state.startPos.x===s&&this.state.startPos.y===e,isFinish:this.state.finishPos.x===s&&this.state.finishPos.y===e,nodeType:t.nodeType,updateMouseState:(t,e)=>this.updateMouseState(t,e),nodeRef:this.references[e][s],key:s}))))))}}e.default=d},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(1);e.default=class{constructor(){this.pathValues=new Map,this.finalPath=[],this.visitedNodesInOrder=[]}produceVisitedInOrder(){return this.visitedNodesInOrder}produceFinalPath(){return this.finalPath}getNeighbors(t,e){let s=[];return s.push({x:e.x+1,y:e.y}),s.push({x:e.x,y:e.y+1}),s.push({x:e.x,y:e.y-1}),s.push({x:e.x-1,y:e.y}),s.push({x:e.x-1,y:e.y+1}),s.push({x:e.x+1,y:e.y+1}),s.push({x:e.x+1,y:e.y-1}),s.push({x:e.x-1,y:e.y-1}),s.filter(s=>s.x>=0&&s.x<i.GRID_W&&s.y>=0&&s.y<i.GRID_H&&t[s.y][s.x].nodeType!==i.NodeType.Wall&&!this.isVisited(s)&&this.cornerCheck(e,s,t))}cornerCheck(t,e,s){return s[t.y][e.x].nodeType!==i.NodeType.Wall||s[e.y][t.x].nodeType!==i.NodeType.Wall}isVisited(t){return this.pathValues.get(this.hash(t)).isVisited}markAsVisited(t){this.visitedNodesInOrder.push(t);let e=this.pathValues.get(this.hash(t)),s=Object.assign(Object.assign({},e),{isVisited:!0});this.pathValues.set(this.hash(t),s)}equalPosition(t,e){return t.x===e.x&&t.y===e.y}hash(t){return t.x.toString()+"-"+t.y.toString()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(4),r=s(5);a.render(i.createElement(r.default,null),document.getElementById("root"))},function(t,e){t.exports=ReactDOM},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(1),r=s(0);class o extends r.Component{constructor(t){super(t),this.state={}}render(){return i.createElement("div",{className:"app"},i.createElement(a.default,null))}}e.default=o},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(0),r=s(1);class o extends a.Component{constructor(t){super(t),this.state={}}handleMouseEvent(t){let e=t.type,s=this.props.position;this.props.updateMouseState(s,e)}render(){let t,{isStart:e,isFinish:s,nodeType:a}=this.props;if(e||s)t=e?"cell-start":s?"cell-finish":"";else switch(a){case r.NodeType.Unvisited:t="cell-unvisited";break;case r.NodeType.Visited:t="cell-visited";break;case r.NodeType.Wall:t="cell-wall";break;case r.NodeType.ShortestPath:t="cell-shortestPath"}return i.createElement("div",{ref:this.props.nodeRef,id:`cell-${this.props.position.x}-${this.props.position.y}`,className:"cell "+t,onMouseDown:t=>this.handleMouseEvent(t),onMouseUp:t=>this.handleMouseEvent(t),onMouseEnter:t=>this.handleMouseEvent(t)})}}e.default=o},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=s(0),r=s(8),o=s(10),n=s(12);class h extends i.Component{constructor(t){super(t),this.state={}}render(){return a.createElement("div",{className:"navbar"},a.createElement("button",{onClick:()=>{this.props.performAlgorithm(new r.default)}},"Dijkstra"),a.createElement("button",{onClick:()=>{this.props.performAlgorithm(new o.default)}},"DFS"),a.createElement("button",{onClick:()=>{this.props.performAlgorithm(new n.default)}},"BFS"),a.createElement("button",{onClick:()=>{this.props.clearPath()}},"Clear"))}}e.default=h},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a=s(9);class r extends i.default{constructor(){super(...arguments),this.minHeap=new a.PriorityQueue}calculatePath(t,e,s){for(this.setMap(t,e),this.minHeap.insert(e,0);0!==this.minHeap.size();){let e=this.minHeap.pop();if(console.log(e),this.markAsVisited(e),this.equalPosition(e,s))return console.log("FINISH REACHED"),void this.findShortestPath(s);let i=this.getNeighbors(t,e),a=this.pathValues.get(this.hash(e)).shortestPath;for(let t of i){let s=a+this.getDistance(e,t),i=this.pathValues.get(this.hash(t));if(this.minHeap.insert(t,s),s<i.shortestPath){let i={shortestPath:s,isVisited:!0,previousNode:e};this.pathValues.set(this.hash(t),i)}}}}getDistance(t,e){return Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2))}setMap(t,e){t.forEach(t=>t.forEach(t=>{let s,i=t.position;s=this.equalPosition(e,i)?0:1/0;let a={shortestPath:s,isVisited:!1,previousNode:null};this.pathValues.set(this.hash(i),a)}))}findShortestPath(t){for(let e=t;null!=e;e=this.pathValues.get(this.hash(e)).previousNode)this.finalPath.unshift(e)}}e.default=r},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PriorityQueue=class{constructor(){this.heap=[]}insert(t,e){if(!this.heap.length||this.heap[this.heap.length-1][1]>e)return this.heap.push([t,e]),this.heap;const s=[];let i=!1;for(let a=0;a<this.heap.length;a++){e>=this.heap[a][1]&&!i&&(s.push([t,e]),i=!0),s.push(this.heap[a])}return this.heap=s}has({x:t,y:e}){return!!this.heap.find(([s])=>s.x===t&&s.y===e)}get({x:t,y:e}){const s=this.heap.find(([s])=>s.x===t&&s.y===e);return s&&s[0]}shift(t){const e=this.heap.shift();return t?e:e?e[0]:void 0}pop(){return this.heap.pop()[0]}priorities(){return this.heap.map(([t,e])=>e)}values(){return this.heap.map(([t])=>t)}size(){return this.heap.length}toArray(t){return t?this.heap.map(([t])=>t):this.heap}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a=s(11);class r extends i.default{constructor(){super(...arguments),this.stack=new a.default}calculatePath(t,e,s){for(this.setMap(t),this.stack.push(e);!this.stack.isEmpty();){let e=this.stack.pop();if(this.markAsVisited(e),this.equalPosition(e,s))return void(this.finalPath=this.visitedNodesInOrder);let i=this.getNeighbors(t,e).reverse();for(let t of i)this.stack.push(t)}}setMap(t){t.forEach(t=>{t.forEach(t=>{let e=t.position;this.pathValues.set(this.hash(e),{isVisited:!1})})})}}e.default=r},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.data=[],this.top=0}push(t){this.data[this.top]=t,this.top++}pop(){return this.top--,this.data[this.top]}isEmpty(){return 0===this.top}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a=s(13);class r extends i.default{constructor(){super(...arguments),this.queue=new a.default}calculatePath(t,e,s){for(this.setMap(t),this.queue.push(e);!this.queue.isEmpty();){let e=this.queue.pop();if(console.log(e),this.markAsVisited(e),this.equalPosition(e,s))return void this.findShortestPath(s);let i=this.getNeighbors(t,e);for(let t of i)this.queue.push(t),this.pathValues.set(this.hash(t),{isVisited:!0,previousNode:e})}}setMap(t){t.forEach(t=>{t.forEach(t=>{let e=t.position;this.pathValues.set(this.hash(e),{isVisited:!1,previousNode:null})})})}findShortestPath(t){for(let e=t;null!=e;e=this.pathValues.get(this.hash(e)).previousNode)this.finalPath.unshift(e)}}e.default=r},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.data=[]}push(t){this.data.push(t)}pop(){return this.data.shift()}isEmpty(){return 0===this.data.length}}}]);
//# sourceMappingURL=main.js.map